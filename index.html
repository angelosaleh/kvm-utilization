<!doctype html>
<html>
  <head>
    <link rel="stylesheet" href="styles.css">
    <title>KVM utilizaion on %host_title%</title>
  </head>
  <body>
    <div class="resourcesdiv">
      <h3>DISK USAGE</h3>
      <table>
        <tr>
          <th colspan="6">df -- display free disk space</th>
        </tr>
        <tr>
          <th>Filesystem</th>
          <th>Size</th>
          <th>Used</th>
          <th>Avail</th>
          <th>Use%</th>
          <th>Mounted on</th>
        </tr>
        <tr>
          <td>/dev/mapper/root</td>
          <td>145G</td>
          <td>2.7G</td>
          <td>142G</td>
          <td>2%</td>
          <td>/</td>
        </tr>
        <tr>
          <td>devtmpfs</td>
          <td>1.9G</td>
          <td>0</td>
          <td>1.9G</td>
          <td>0%</td>
          <td>/dev</td>
        </tr>
        <tr>
          <td>/dev/sda1</td>
          <td>1014M</td>
          <td>144M</td>
          <td>871M</td> 
          <td>15%</td>
          <td>/boot</td>
        </tr>
        <tr>
          <td>/dev/mapper/vms</td>
          <td>932G</td>
          <td>221G</td>
          <td>711G</td>
          <td>24%</td>
          <td>/data</td>
        </tr>
      </table>
    </div>
    <div class="resourcesdiv">
      <h3>RAM USAGE</h3>
      <canvas id="ramchart"></canvas>
      <table>
        <tr>
          <th>Installed</th>
          <th>Allocated</th>
          <th>Free</th>
        </tr>
        <tr>
          <td>128G</td>
          <td>100G</td>
          <td>28G</td>
        </tr>
      </table>
    </div>
    <div class="resourcesdiv">
      <h3>CPU USAGE</h3>
      <table>
        <tr>
          <th>Total CPUs</th>
          <th>Allocated</th>
          <th>Free</th>
        </tr>
        <tr>
          <td>40</td>
          <td>38</td>
          <td>2</td>
        </tr>
      </table>
      <h3>CPU PINNING</h3>
      <table>
        <tr>
          <th>Numa Node 0</th>
          <th>0</th>
          <th>2</th>
          <th>4</th>
          <th>6</th>
          <th>8</th>
          <th>10</th>
          <th>12</th>
          <th>14</th>
          <th>16</th>
          <th>18</th>
          <th>20</th>
          <th>22</th>
          <th>24</th>
          <th>26</th>
          <th>28</th>
          <th>30</th>
          <th>32</th>
          <th>34</th>
          <th>36</th>
          <th>38</th>
        </tr>
        <tr>
          <th></th>
          <td>myvm1<br>myvm4</td>
          <td>myvm1<br>myvm4</td>
          <td>myvm1<br>myvm4</td>
          <td>myvm1<br>myvm4</td>
          <td>myvm1<br>myvm4</td>
          <td>myvm2<br>myvm4</td>
          <td>myvm2<br>myvm4</td>
          <td>myvm2<br>myvm4</td>
          <td>myvm4</td>
          <td>myvm4</td>
          <td>myvm4</td>
          <td>myvm1<br>myvm4</td>
          <td>myvm1<br>myvm4</td>
          <td>myvm1<br>myvm4</td>
          <td>myvm1<br>myvm4</td>
          <td>myvm1<br>myvm4</td>
          <td>myvm2<br>myvm4</td>
          <td>myvm2<br>myvm4</td>
          <td>myvm2<br>myvm4</td>
          <td>myvm4</td>
        </tr>
        <tr>
          <th>Numa Node 1</th>
          <th>1</th>
          <th>3</th>
          <th>5</th>
          <th>7</th>
          <th>9</th>
          <th>11</th>
          <th>13</th>
          <th>15</th>
          <th>17</th>
          <th>19</th>
          <th>21</th>
          <th>23</th>
          <th>25</th>
          <th>27</th>
          <th>29</th>
          <th>31</th>
          <th>33</th>
          <th>35</th>
          <th>37</th>
          <th>39</th>
        </tr>
        <tr>
          <th></th>
          <td>myvm3</td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td>myvm3</td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
        </tr>
      </table>
    </div>
    <div class="resourcesdiv">
      <h3>ALL VMS USAGE</h3>
      <table>
        <tr>
          <th>VM Name</th>
          <th>State</th>
          <th>Autostart</th>
          <th>Disk</th>
          <th>Location</th>
          <th>RAM</th>
          <th>Current CPU</th>
          <th>Max CPU</th>
        </tr>
        <tr>
          <td>myvm1</td>
          <td>running</td>
          <td>yes</td>
          <td>60G</td>
          <td>/data/myvm1.img</td>
          <td>25G</td>
          <td>10</td>
          <td>12</td>
        </tr>
        <tr>
          <td>myvm2</td>
          <td>running</td>
          <td>yes</td>
          <td>60G</td>
          <td>/data/myvm2.img</td>
          <td>25G</td>
          <td>6</td>
          <td>6</td>
        </tr>
        <tr>
          <td>myvm3</td>
          <td>running</td>
          <td>no</td>
          <td>60G</td>
          <td>/data/myvm3.img</td>
          <td>25G</td>
          <td>2</td>
          <td>2</td>
        </tr>
        <tr>
          <td>myvm4</td>
          <td>running</td>
          <td>no</td>
          <td>80G</td>
          <td>/data/myvm4.img</td>
          <td>25G</td>
          <td>20</td>
          <td>20</td>
        </tr>
        <tr>
          <th>Total</th>
          <th></th>
          <th></th>
          <th>260G</th>
          <th></th>
          <th>100G</th>
          <th>38</th>
          <th>40</th>
        </tr>
      </table>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.1/Chart.bundle.min.js" integrity="sha256-N4u5BjTLNwmGul6RgLoESPNqDFVUibVuOYhP4gJgrew=" crossorigin="anonymous"></script>
    <script>
      var ramctx = document.getElementById("ramchart");
      data = {
        datasets: [{
          data: [10,138],
          backgroundColor:[
            'green',
            'red',
          ]
        }],
        labels: [
          'Free 28G',
          'Allocated 100G'
        ],
      };

      var myPieChart = new Chart(ramctx,{
        type: 'pie',
        data: data,
        options: {
          tooltips: {
            callbacks: {
              label: function(tooltipItem, data) {
                return data.labels[tooltipItem.index];
              }
            }
          },
          legend: {
            onClick: (e) => e.stopPropagation()
          }
        }
      });
    </script>
  </body>
</html>
